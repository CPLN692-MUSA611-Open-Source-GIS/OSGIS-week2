<!DOCTYPE html>
<html>
  <head>
    <script src="health_centers_csv.js"></script>
  </head>
  <body>
    <!--left panel-->
    <div style="position:fixed;left:0px;width:400px">
    </div>
    <!--map-->
    <div id="map" style="position:fixed;right:0px;left:400px;height:100%;">
    </div>

    <!--javascript-->
    <script>
      /* =====================

      # Lab 2, Part 2 â€” Convert CSV to JSON

      ## Introduction

      Creating this week's homework assignment, it was necessary to convert the data stored in
      healthCentersCSV from its native format (CSV) to JSON. This is a difficult task partially because
      it is hard to think about all of the edge cases you might encounter and partially because
      datasets are so rarely 'clean'.

      Try your hand at a similar task:
      For each row in the 'CSV' (instead of separate lines, our 'CSV' is broken up by semicolons),
      console.log an array with all columns separated into different fields and all lines represented
      as separate arrays.

      For example, given the row "I'm,a,little,teapot", you will print out ["I'm", "a", "little", "teapot"].

      Hint 1: It might be useful to structure this data as an array of arrays or an array of objects.
      The outer array represents all the rows of our CSV, while each inner array or object represents
      one such row.

      Hint 2: Check out this method that all strings have (practice using it on small, simplified
      examples in your console!!!):
      https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/split

      ===================== */

      /* =====================

      Start code

      ===================== */

      // feel free to comment this line out if it is too noisy in your console!
      console.log(healthCentersCSV)

      // Create 2 arrays to store this data as an array of arrays and an array of objects separately
      var splitArrayOfArrays = [];
      var splitArrayOfObjects = [];
      var stringToSplit = healthCentersCSV;
      // Split the CSV into rows
      var stringArray = splitString(stringToSplit, ";")
  
      // Split each row and store it as an array and a object
      for (var i = 0; i < stringArray.length; i++){
        splitArrayOfArrays.push(splitString (stringArray[i], ","));
        if (i > 0){
          splitArrayOfObjects.push(arrayToObej(splitString (stringArray[i], ",")));
        }
      }

      // Function to split the string with the given separator, return the array with the result
      function splitString(theString, separator){
        var stringArray = theString.split(separator);
        return stringArray;
      }

      // Function to change the given array to an object
      function arrayToObej(values){
        var obj = {LNG: values[0], 
          LATk: values[1], 
          OBJECTID: values[2], 
          NAME: values[3], 
          ORGANIZATION: values[4], 
          ZIP: values[5], 
          PHONE: values[6], 
          WEBSITE: values[7], 
          DENTAL_PHONE: values[8],
          FULL_ADDRESS: values[9]};
        return obj;
      }



      console.log(splitArrayOfArrays);
      console.log(splitArrayOfObjects);




      /* =====================

      End code

      ===================== */
    </script>
  </body>
</html>
